From the new to old


Lesson 2 - 

- First handle from the smaller object ...+
- do propSingle object that will do the db operations as U want. 


maybe to :
- try make field as seperate table  - seems not possible 
- 


Todos 

- Open the workbench and learn how to work with that - V 
- Plan to make The props single as entities object . 

- Do object of singles props
- Do a list inside the event




end todos


Ok, I am continuing . 


Need to start the workbench . But first check if the old way working .

Here is the problem. the old not working. 

"Could not access the privilig". Apparently because the new insallation....

Also it's define it in the started programs, But I don't want Overloading on the pc. But I don't see it in the task manager. 

Ok, Have started it. 
But don't know what version of mysql it's running, and how to define my project to that .

Seems it's work. U have in the branch option to run queries. How do I can open the shell

Need to understand how to work with that. How do I show the tables;

https://dev.mysql.com/doc/workbench/en/wb-getting-started-tutorial-creating-a-model.html

Maybe U can connect it to the db exist. 

Ok , it's work U can see the db by click the scheme tabe in the bottom and on each tabel right click and select ... 

https://medium.com/@tushar0618/how-to-create-er-diagram-of-a-database-in-mysql-workbench-209fbf63fd03 - that's for see it as diagram

I bielive u can anaylyze too what is connect to what. (or not) But don't do it right now . 

To start from the cmd u need to access it like U did with your db 

https://dev.mysql.com/doc/workbench/en/wb-launching-windows.html

u have a shorcut there :
I putted it in the important tools. 

But u need to join your old mysql too. 

beacuse U have many tutoiral built on that. - But it's problem because now it's not work - Ok do it in another time ? Hope so



It not doing auto-refresh and apparently u need a special actions for define it. 

U can do commit transaction in the queries tab - But it's not helping.... 

Ok let move forward. 


15:28:13	ALTER TABLE single_props_names ADD CONSTRAINT prop_name UNIQUE (prop_name)	Error Code: 1071. Specified key was too long; max key length is 1000 bytes	0.000 sec


Ok so it's not doing by itself the differnt from if exist or not . 

And hibernate mayble make a little ease. But adding more complication. 

SO In this case maybe u need to create a static final array. and from there to create the new values. 


U here see at databaseLoader1 the problem ("this not work"). 
I need to be able to send the same propname to many values. 
Have tried to make it many to one - not work. 

this is the google search. 

And u need maybe to do a convient area to check the hibernate issues. 
anyway now we continuing in that. Until we can do a object that contain proper Mutil and sinlgle props list, and pass it to each socialevent

this is the log : 

org.springframework.dao.InvalidDataAccessApiUsageException: detached entity passed to persist: com.lingar.SocialEvents.entities.SinglePropName; nested exception is org.hibernate.PersistentObjectException: detached entity passed to persist: com.lingar.SocialEvents.entities.SinglePropName 









***********************************

Lesson 1- 

In this project we include Hibernate by pom.xml , and with Spring. 
We config it with annotations in the code. 

In the application properties U can define it with some options : 

spring.jpa.hibernate.ddl-auto= create-drop / create / update /  none :
https://stackoverflow.com/a/42147995/9727918

create – Hibernate first drops existing tables, then creates new tables
update – the object model created based on the mappings (annotations or XML) is compared with the existing schema, and then Hibernate updates the schema according to the diff. It never deletes the existing tables or columns even if they are no more required by the application
create-drop – similar to create, with the addition that Hibernate will drop the database after all operations are completed. Typically used for unit testing
validate – Hibernate only validates whether the tables and columns exist, otherwise it throws an exception
none – this value effectively turns off the DDL generation

U can test it by the platyin in adding or removing or changing object fields. 
Anyway the way to work is or create - for seeing the new trying or update to see changes and adding . . 


***Insert Object in the other object ***

See how I am trying to add  simple eventProperty object in the socialevent / 

I am getting : 

" Could not determine type for: com.lingar.SocialEvents.entities.EventProperty, at table: social_event, for columns: 
[org.hibernate.mapping.Column(event_property)]"

Did what  he said here : 
https://stackoverflow.com/q/44475949/9727918

And now getting other error : 
Caused by: org.springframework.dao.InvalidDataAccessApiUsageException: org.hibernate.TransientPropertyValueException: 
object references an unsaved transient instance -
 save the transient instance before flushing :
  com.lingar.SocialEvents.entities.SocialEvent.eventProperty -> com.lingar.SocialEvents.entities.EventProperty;
   nested exception is java.lang.IllegalStateException: org.hibernate.TransientPropertyValueException: object references an unsaved transient instance - save the transient instance before flushing : com.lingar.SocialEvents.entities.SocialEvent.eventProperty -> com.lingar.SocialEvents.entities.EventProperty

   
   have done with embedded and now it's generate other problem : 
    component property not found: eventPropertyId
    
    
    
Problems with the nested objects : 

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' 
defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]:
 Invocation of init method failed; nested exception is org.hibernate.MappingException:
  component property not found: eventPropertyId
  
  
  Ok After removing the @Entity it's work. U can't make them both. 
  But this is example to "Embedded" that mean the object will inserted as more columns , so u need to define it "Join Table", 
  as U can see in social 
  event. 
  
  BUT I want to know how to create it as seperate entity. 
  And U gonna do it on the next time. 
  
  
  
  - First - pass by the old documnet and project about hibernate, and understand it. - All it unorganized and need a diving. Now it's the ordered 
  Summary. 
  - Second - Do new Object that will serve properly as other entity. Do abstract or any other thing U need. 
  
  Search for "Spring Hibernate nested Entities" -- For beginning. 
  
  SUccess. Was need @oneToOne and CasadeType - for the saving.
  
   But the table is corrupted. I want it not insert to the social-event table - Not it's just look becaue the table is big. 
   
   But U need to think what do u want. What is the right way to do it. 
   
   Simplicity 
   
   And I think that if u do it from outside it problem U need to casade it. 
   
   Ok greate it's working well . 
   
   Now let's try it with two children. On of special Array Strings, and one of simple string.
   
   
   Going forward. 
   
   Now i am trying to make list inside the property 
   
   cannot simultaneously fetch multiple bags: [com.lingar.SocialEvents.entities.SocialEvent.myArray, com.lingar.SocialEvents.entities.EventMultipleProperty.propsList]
  
  
  
  Ok We success many things today. 
  Next u need to replan the DB structure, and oop way things working. 
  
  U must make it the most simple u can . 
  In the next Versions U will get it better. Now U work on many things together - the app itself, SQL technique and Hibernate
  So U need to make it simple.
  
  U don't need to feel bad about that. That's the way person study. U can't jump to level 10 in one time. 
  So birth some air and relax. 
  
  
  